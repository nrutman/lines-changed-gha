name: 'Lines Changed Summary'
description: 'Comment on PRs with a lines changed summary, with configurable file groups'
author: 'Your Name'
branding:
  icon: 'bar-chart-2'
  color: 'blue'

inputs:
  github-token:
    description: 'GitHub token for API access'
    required: true
    default: ${{ github.token }}
  file-groups:
    description: |
      YAML configuration for file groups. Each group has a label, patterns (glob), count (boolean),
      and ignore-whitespace (boolean). Groups are processed in order - first match wins. Example:
        - label: "Source"
          patterns:
            - "src/**/*.ts"
          count: true
          ignore-whitespace: true
        - label: "Generated"
          patterns:
            - "**/generated/**"
            - "**/*.generated.ts"
          count: false
        - label: "Tests"
          patterns:
            - "**/*.test.ts"
          count: true
      Note: ignore-whitespace requires actions/checkout to run before this action.
    required: false
    default: ''
  default-group-label:
    description: 'Label for files not matching any group pattern'
    required: false
    default: 'Changed'
  ignore-whitespace:
    description: 'Exclude whitespace-only changes from all groups. Individual groups can override this with their own ignore-whitespace setting. Requires actions/checkout.'
    required: false
    default: 'false'
  comment-header:
    description: 'Optional text to display above the summary (leave empty for default)'
    required: false
    default: ''

outputs:
  added-lines:
    description: 'Number of lines added (from groups with count: true)'
  removed-lines:
    description: 'Number of lines removed (from groups with count: true)'
  uncounted-added-lines:
    description: 'Number of lines added (from groups with count: false)'
  uncounted-removed-lines:
    description: 'Number of lines removed (from groups with count: false)'
  total-files:
    description: 'Total number of files changed'

runs:
  using: 'node20'
  main: 'dist/index.js'
